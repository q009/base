ui_toolbar_height = 0.05
ui_toolbar_map_button_width = 0.2
ui_toolbar_map_button_space = $ui_toolview_small_elem_space
ui_toolbar_map_button_text_scale = $ui_toolview_base_text_size
ui_toolbar_button_space = $ui_toolview_base_elem_space
ui_toolbar_button_size = 0.035
ui_toolbar_icon_size = (*f $ui_toolview_base_icon_size 0.9)
ui_toolbar_space = (*f $ui_toolbar_map_button_space 2)

// Dynamically calculated
ui_toolbar_tools_width = 0

toolbar_actions_left = []
toolbar_actions_right = []

ui_toolbar_left = [
    uifill (uiwidth $ui_toolbar_tools_width) 0 [
        uiclamp 1 1 1 1
        uihlist $ui_toolbar_button_space [
            uialign -1 0
            uiclamp 0 0 1 1
            uifill $ui_toolbar_button_space 0

            looplist action $toolbar_actions_left [
                ui_tool_button [
                    uit_icon = @(tool_action_prop [$action] icon)
                    uit_icon_size = @ui_toolbar_icon_size
                    uit_icon_align = 0
                    uit_width = @ui_toolbar_button_size
                    uit_height = @ui_toolbar_button_size
                    uit_tip_action = $action
                    uit_on_click = [
                        tool_do_action $action
                    ]
                ]
            ]

            uialign* 0 -1
        ]
    ]
]

ui_toolbar_right = [
    uifill (uiwidth $ui_toolbar_tools_width) 0 [
        uiclamp 1 1 1 1
        uihlist $ui_toolbar_button_space [
            uialign 1 0
            uiclamp 0 0 1 1

            looplist action $toolbar_actions_right [
                ui_tool_button [
                    uit_icon = @(tool_action_prop [$action] icon)
                    uit_icon_size = @ui_toolbar_icon_size
                    uit_icon_align = 0
                    uit_width = @ui_toolbar_button_size
                    uit_height = @ui_toolbar_button_size
                    uit_tip_action = $action
                    uit_on_click = [
                        tool_do_action $action
                    ]
                ]
            ]

            uialign* 0 -1
            uifill $ui_toolbar_button_space 0
        ]
    ]
]

ui_toolbar_map = [
    uifill (uiwidth $ui_toolbar_map_button_width) $ui_toolbar_height [
        @(ui_tool_interactable 0 0 [
            uiclamp 1 1 1 1
                uihlist $ui_toolbar_map_button_space [
                    uiimage "textures/icons/editing" $ui_toolview_accent_colour 0 $ui_toolbar_icon_size $ui_toolbar_icon_size
                    uitext $mapname $ui_toolbar_map_button_text_scale
                ]
        ])
    ]
]

toolbar_calc_layout = [
    ui_toolbar_tools_width = (-f 1 $ui_toolbar_map_button_width)
    ui_toolbar_tools_width = (*f $ui_toolbar_tools_width 0.5)
    ui_toolbar_tools_width = (-f $ui_toolbar_tools_width $ui_toolbar_button_space)
]

ui_toolbar = [
    toolbar_calc_layout

    uifill 0 $ui_toolbar_height [
        uiclamp 1 1
        uialign 0 -1
        uihlist $ui_toolbar_space [
            ui_toolbar_left
            ui_toolbar_map
            ui_toolbar_right
        ]
    ]
]

toolbar_init = [
    // Left toolbar
    append toolbar_actions_left ta_menu
    append toolbar_actions_left ta_edit_settings
    append toolbar_actions_left ta_save
    append toolbar_actions_left ta_save_as
    append toolbar_actions_left ta_undo
    append toolbar_actions_left ta_redo
    append toolbar_actions_left ta_copy
    append toolbar_actions_left ta_paste
    append toolbar_actions_left ta_search

    // Right toolbar
    append toolbar_actions_right ta_textures
    append toolbar_actions_right ta_ents
]
