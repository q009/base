ui_toolview_panel_save_as_save_button_width = (uiwidth 0.07)

tool_save_as_filename = ""

ui_tool_save_as = [
    uivlist $ui_toolpanel_elem_space [
        uiclamp 1 1
        ui_tool_textinput "File name:" tool_save_as_filename 16 "[click here to set file name]"
        uibutton "Save" $ui_toolview_panel_save_as_save_button_width 0 [
            savemap $tool_save_as_filename
        ] 0 [] (=s $tool_save_as_filename "") 0 [] 0xffffffff "" $ui_toolpanel_text_size
        uialign- 1
    ]
]

tool_action_save_as = [
    toolpanel_toggle tool_save_as "Save as" left
]

tool_action ta_save [
    short_desc "Save"
    long_desc "Save current map"
    icon "textures/icons/menu"
    action [
        savemap
    ]
]

tool_action ta_save_as [
    short_desc "Save as"
    long_desc "Save map using a file name"
    icon "textures/icons/menu"
    action [
        tool_action_save_as
    ]
]
